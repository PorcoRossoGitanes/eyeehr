<!--
前提として下記のXqueryスクリプトが必要です。
action="http://192.168.33.10/exist/apps/eyeehr/upload.xq"
1)ファイルを選択から画像を選択する。
2)「送信」ボタンを押下する。
3)imgタグに画像が表示される。
-->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>HTML Upload</title>
	    <script src="js/jquery-2.1.1.js"></script>
    </head>
    <body>
        <script>
        function result () 
        {
            // console.log($('iframe#ajax').contents());
            var url = $('iframe#ajax').contents().find('#url').text();
            console.log(url);
            $('img').attr('src', url);
        }
        </script>
        <!--画像登録用のフォーム-->
        <form id="form1" 
            enctype="multipart/form-data" 
            method="post" 
            action="http://192.168.33.10/exist/apps/eyeehr/upload.xq"
            target="ajaxPostImage"
        >
            <fieldset>
                <legend>Upload Document:</legend>
                <input type="file" name="file"/>
                <input type="input" name="collection" value="/db/apps/eyeehr"/>
                <input type="submit" value="送信" />
            </fieldset>
        </form>
        <!-- 結果表示用のiframeを用意する。 -->
        <iframe id="ajax" name="ajaxPostImage" onLoad="result()"></iframe>
        <!-- JQuery Object で中身を確認する。-->
        <input type="button" onclick="console.log($('iframe#ajax').contents())" value="確認"/>
        <!--img src="http://192.168.33.10/exist/rest/db/apps/eyeehr/1411112202_paint_bucket_red.png"/-->
        <img src=""/>
    </body>
</html>
